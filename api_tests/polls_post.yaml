# Test generated by RoostGPT for test fastApi-test using AI Type Open AI and AI Model gpt-4

config:
  target: "{{ $processEnvironment.SERVER_URL }}"
  phases:
    - duration: 60
      arrivalRate: 20
  plugins:
    expect: {}
  payload:
    path: "polls_post.csv"
    fields: ["title", "type", "is_add_choices_active", "is_voting_active", "created_by", "created_at", "updated_at"]
    skipHeader: true

scenarios:
  - name: "Successful API request"
    flow:
      - post:
          url: "/polls/"
          json:
            title: "{{ title }}"
            type: "{{ type }}"
            is_add_choices_active: "{{ is_add_choices_active }}"
            is_voting_active: "{{ is_voting_active }}"
            created_by: "{{ created_by }}"
            created_at: "{{ created_at }}"
            updated_at: "{{ updated_at }}"
          expect:
            - statusCode: 200
            - hasProperty: "title"
            - hasProperty: "type"
            - hasProperty: "is_add_choices_active"
            - hasProperty: "is_voting_active"
            - hasProperty: "created_by"
            - hasProperty: "created_at"
            - hasProperty: "updated_at"

  - name: "API request with validation failure"
    flow:
      - post:
          url: "/invalid-url"
          json:
            title: "{{ title }}"
            type: "{{ type }}"
          expect:
            - statusCode: 422
            - hasProperty: "detail"

  - name: "API request with edge case"
    flow:
      - post:
          url: "/polls/"
          json:
            title: "Edge case title with special characters !@#$%^&*()"
            type: "Edge case type with large data"
            is_add_choices_active: true
            is_voting_active: true
            created_by: 1
            created_at: "2022-01-01T00:00:00Z"
            updated_at: "2022-01-01T00:00:00Z"
          expect:
            - statusCode: 200
            - hasProperty: "title"
            - hasProperty: "type"
            - hasProperty: "is_add_choices_active"
            - hasProperty: "is_voting_active"
            - hasProperty: "created_by"
            - hasProperty: "created_at"
            - hasProperty: "updated_at"
